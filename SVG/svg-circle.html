<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .box{
            width:200px;
            height:200px;
        }
    </style>
</head>
<body>
    <div style="border:solid 1px orange;" class='box'>
        <svg  id='svg' width='100%' height='100%'
        xmlns="http://www.w3.org/2000/svg">

          <path d=''fill='none' stroke='blue'></path>
        </svg>
    </div>
    <script>
      window.onload=function(){
          //å‘½åç©ºé—´
          let svgNS="http://www.w3.org/2000/svg";

          //è·å–çˆ¶çº§å…ƒç´ 
          var div=document.querySelector('.box');
          //è·å–svg
          let svg=document.querySelector('#svg');

          //å æ¯”ä¾‹
          var arrNum=[60,30,10];
          var angle=360;
          //ç´¯åŠ çš„è§’åº¦
          var sumNum=0;
          //å†…å¤–åœˆåŠå¾„
          var outerR=100;
          var innerR=85;
          //ä¸­å¿ƒåæ ‡
          var cx=outerR;
          var cy=outerR;
          var color=['rgba(114,218,206,1)','rgba(250,107,107,1)','rgba(231,231,239,1)'];
          if(arrNum.some(num => num===100)) {
            // å¦‚æœæŸä¸€é¡¹æ˜¯ğŸ’¯æ»¡åˆ†çš„è¯ï¼Œä¸éœ€è¦å†è®¡ç®—ç™¾åˆ†æ¯”ï¼Œç›´æ¥è¿”å›åœ†ç¯å³å¯
            var circle = createTag('circle',{
              cx: cx,
              cy: cy,
              r: innerR+(outerR-innerR)/2,
              fill: 'none',
              stroke: color[arrNum.indexOf(100)],
              'stroke-width': outerR - innerR}
            );
            svg.appendChild(circle);
            return;
          }
          //å¤–åœ†èµ·å§‹åæ ‡
          var outerXY=[{x:cx,y:cy-outerR}];
          //å†…åœ†èµ·å§‹åæ ‡
          var innerXY=[{x:cx,y:cy-innerR}];
          //å¾ªç¯æ¯”ä¾‹è·å¾—å†…å¤–åœˆåæ ‡
          console.log(arrNum);
          for(var i=0;i<arrNum.length;i++){
              //é€šè¿‡æ¯”ä¾‹è·å–è§’åº¦å€¼
              var angNum = arrNum[i]*360/100;
              sumNum += angNum;
              //å½“æœ€åä¸€ä¸ªæ¯”ä¾‹æ—¶,å°†è§’åº¦å˜æˆ360,é¿å…ä¸­é€”å°æ•°ç´¯åŠ çš„è¯¯å·®
              if(i == arrNum.length - 1){
                  sumNum = 360;
              }
              //ä¸‰è§’å‡½æ•°è·å–è§’åº¦åç¦»ååœ†å¼§ä¸Šçš„åæ ‡ï¼ˆæ¯ä¸ªèµ·å§‹ç‚¹è®¡ç®—æ–¹æ³•å¯èƒ½éƒ½ä¸ä¸€æ ·ï¼‰
              // å¼§åº¦ = 2 * Ï€ / 360 * è§’åº¦ = Ï€ / 180 * è§’åº¦ = è§’åº¦ * Math.PI / 180


              // é¡ºæ—¶é’ˆ - ä»åœ†é¡¶éƒ¨ç”» (é¡ºæ—¶é€†æ—¶ - å¯¹åº”ä¸‹è¾¹çš„ç»˜åˆ¶pathä¹Ÿéœ€è¦ä¿®æ”¹ä¸ºé¡ºæ—¶é€†æ—¶)
              /* var outerX=cx + outerR*Math.sin(sumNum*Math.PI/180);
              var outerY=cy - outerR*Math.cos(sumNum*Math.PI/180);
              var innerX=cx + innerR*Math.sin(sumNum*Math.PI/180);
              var innerY=cy - innerR*Math.cos(sumNum*Math.PI/180); */

              // é€†æ—¶é’ˆ - ä»åœ†é¡¶éƒ¨ç”»
              var outerX=cx - outerR*Math.sin(sumNum*Math.PI/180);
              var outerY=cy - outerR*Math.cos(sumNum*Math.PI/180);
              var innerX=cx - innerR*Math.sin(sumNum*Math.PI/180);
              var innerY=cy - innerR*Math.cos(sumNum*Math.PI/180);

              // é¡ºæ—¶é’ˆ - ä»åœ†å·¦ä¾§å¼€å§‹ç”»
              /* var outerX=outerR*Math.cos(sumNum*Math.PI/180)+cx;
              var outerY=outerR*Math.sin(sumNum*Math.PI/180)+cy;
              var innerX=innerR*Math.cos(sumNum*Math.PI/180)+cx;
              var innerY=innerR*Math.sin(sumNum*Math.PI/180)+cy; */

              outerXY.push({x:outerX,y:outerY});
              innerXY.push({x:innerX,y:innerY});
          }
          console.log(outerXY);
          //ç”»æ‰‡å½¢
          for(var i=0;i<outerXY.length;i++){
              if(i == outerXY.length-1){
                  break;
              }
              /* 
                SVGä¸­çš„path
                M x y   æŠŠç”»ç¬”ç§»åŠ¨åˆ°ç‚¹(x,y) (Mæ˜¯ Moveçš„ç¼©å†™)
                A rx ry x-axis-rotation large-arc-flag sweep-flag x y
                æŒ‰ç»™å®šå‚æ•°ç»˜åˆ¶åœ†å¼§ï¼Œå„éƒ¨åˆ†å‚æ•°çš„è§£é‡Šå¦‚ä¸‹ï¼š
                  rx ry
                  åœ†å¼§çš„xxè½´åŠå¾„å’Œyyè½´åŠå¾„ ï¼ˆAå‘½ä»¤ä¹Ÿå¯ä»¥ç”¨æ¥ç»˜åˆ¶æ¤­åœ†å¼§çš„ï¼Œå¦‚æœæ˜¯åœ†å¼§åˆ™ rx=ryrx=ryï¼‰
                  x-axis-rotation
                  xxè½´çš„æ—‹è½¬è§’åº¦ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ä¸åˆ°ï¼Œè®¾ä¸º 0
                  large-arc-flag
                  æ˜¯å¦ä¸ºå¤§åœ†å¼§ï¼Œ1ä¸ºæ˜¯ï¼Œ0ä¸ºå¦
                  sweep-flag
                  åœ†å¼§ç»˜åˆ¶çš„æ–¹å‘ï¼ˆä»èµ·ç‚¹åˆ°ç»ˆç‚¹ï¼‰ï¼Œ1ä¸ºé¡ºæ—¶é’ˆï¼Œ0ä¸ºé€†æ—¶é’ˆ
                  x y
                  åœ†å¼§ç»ˆç‚¹çš„åæ ‡(x,y)
                H ç»˜åˆ¶å¹³è¡Œçº¿
                V ç»˜åˆ¶å‚ç›´çº¿
                Z ä»å½“å‰ç‚¹ç”»ä¸€æ¡ç›´çº¿åˆ°è·¯å¾„çš„èµ·ç‚¹
              */
              let largeArcFlag = arrNum[i] >= 50 ? 1 : 0;
              // é¡ºæ—¶é’ˆ
              // var opath=createTag('path',{'fill':color[i],'d':'M'+outerXY[i].x+" "+outerXY[i].y+"A"+outerR+" "+outerR+' 0 '+ largeArcFlag +' 1 '+outerXY[i+1].x+" "+outerXY[i+1].y+"L"+innerXY[i+1].x+" "+innerXY[i+1].y+"A"+innerR+" "+innerR+" 0 "+ largeArcFlag +" 0 "+innerXY[i].x+" "+innerXY[i].y+"Z"});
              // é€†æ—¶é’ˆ
              var opath=createTag('path',{
                'fill':color[i],
                'd':'M'+outerXY[i].x+" "+outerXY[i].y+"A"+outerR+" "+outerR+' 0 '+ largeArcFlag +' 0 '+outerXY[i+1].x+" "+outerXY[i+1].y+"L"+innerXY[i+1].x+" "+innerXY[i+1].y+"A"+innerR+" "+innerR+" 0 "+ largeArcFlag +" 1 "+innerXY[i].x+" "+innerXY[i].y+"Z"
              });
              svg.appendChild(opath);
          }
          //åˆ›å»ºæ ‡ç­¾
          function createTag(tag,obj){
            var oTag=document.createElementNS(svgNS,tag);
            for(var attr in obj){
                oTag.setAttribute(attr,obj[attr]);
            }
            return oTag;
          }
      }
    </script>
</body>
</html>